FROM oraclelinux:8.4
MAINTAINER hello@mr.staker.ltd
ENV SHELL=/bin/bash

RUN yum install -y gcc gcc-c++ make curl git rpm-build
RUN curl -LO https://get.golang.org/$(uname)/go_installer && chmod +x go_installer && ./go_installer && mv /root/.go /opt/go
RUN curl -L -o omnibus.sh https://omnitruck.cinc.sh/install.sh && chmod +x omnibus.sh && ./omnibus.sh -v 16.11.7
RUN /opt/cinc/embedded/bin/gem install fpm-cookery -v 0.35.1
RUN /opt/cinc/embedded/bin/gem install serverspec -v 2.41.5

ENV GOROOT=/opt/go
ENV GOPATH=/recipe/go
ENV GOCACHE=/recipe/go/go-build
ENV PATH=/opt/go/bin:/opt/cinc/embedded/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
